<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="robots" content="noindex">
  <title>Auth Callback</title>
</head>
<body>
<script>
(function() {
  function getParam(name) {
    const m = location.hash.substr(1).split('&').map(p=>p.split('=')).find(a=>a[0]===name);
    return m ? decodeURIComponent(m[1]) : null;
  }
  const token = getParam('access_token');
  if (token) {
    localStorage.setItem('netlify-cms-oauth-token', token);
    window.close();
  } else {
    document.body.innerText = 'No token found.';
  }
})();
</script>
</body>
</html>
